<div class="tabs-container">
  <!-- Tab Navigation -->
  <div class="tabs-nav">
    <button
      type="button"
      class="tab-button"
      [class.active]="activeTab === 'general'"
      (click)="onTabChange('general')">
      ğŸ“Š General
    </button>
    <button
      type="button"
      class="tab-button"
      [class.active]="activeTab === 'indicadores'"
      (click)="onTabChange('indicadores')">
      ğŸ“ˆ Indicadores Semanales
    </button>
    <button
      type="button"
      class="tab-button"
      [class.active]="activeTab === 'grafica'"
      (click)="onTabChange('grafica')">
      ğŸ“Š GrÃ¡ficas
    </button>
  </div>

  <!-- Tab Content -->
  <div class="tab-content">
    <!-- General Tab -->
    <div *ngIf="activeTab === 'general'" class="tab-panel">
      <div class="panel-header">
        <h3>Registros de ProducciÃ³n</h3>
        <button
          type="button"
          class="btn btn--primary"
          (click)="onCreate()"
          [disabled]="loading">
          â• Nuevo Registro
        </button>
      </div>

      <div class="table-container" *ngIf="seguimientos.length > 0">
        <table class="data-table">
          <thead>
            <tr>
              <th>Fecha</th>
              <th>Edad (dÃ­as)</th>
              <th>Mort. H</th>
              <th>Mort. M</th>
              <th>Sel H</th>
              <th>ConsKg H</th>
              <th>ConsKg M</th>
              <th>Huevo Tot</th>
              <th>Huevo Inc</th>
              <th>Peso Huevo</th>
              <th>Etapa</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let seg of seguimientos">
              <td>{{ seg.fechaRegistro | date:'shortDate' }}</td>
              <td>{{ calcularEdadDias(seg.fechaRegistro) }}</td>
              <td>{{ seg.mortalidadH }}</td>
              <td>{{ seg.mortalidadM }}</td>
              <td>{{ seg.selH }}</td>
              <td>{{ seg.consKgH | number:'1.2-2' }}</td>
              <td>{{ seg.consKgM | number:'1.2-2' }}</td>
              <td>{{ seg.huevosTotales }}</td>
              <td>{{ seg.huevosIncubables }}</td>
              <td>{{ seg.pesoHuevo | number:'1.2-2' }}g</td>
              <td>{{ seg.etapa }}</td>
              <td>
                <div class="action-buttons">
                  <button
                    type="button"
                    class="btn btn--sm btn--outline"
                    (click)="onViewDetail(seg)"
                    title="Ver detalle">
                    ğŸ‘ï¸
                  </button>
                  <button
                    type="button"
                    class="btn btn--sm btn--outline"
                    (click)="onEdit(seg)"
                    title="Editar">
                    âœï¸
                  </button>
                  <button
                    type="button"
                    class="btn btn--sm btn--danger"
                    (click)="onDelete(seg.id)"
                    title="Eliminar">
                    ğŸ—‘ï¸
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div *ngIf="seguimientos.length === 0" class="empty-state">
        <div class="empty-icon">ğŸ“„</div>
        <p>No hay registros de producciÃ³n para este lote.</p>
        <button
          type="button"
          class="btn btn--primary"
          (click)="onCreate()">
          Crear primer registro
        </button>
      </div>
    </div>

    <!-- Indicadores Semanales Tab -->
    <div *ngIf="activeTab === 'indicadores'" class="tab-panel">
      <app-tabla-lista-indicadores
        [seguimientos]="seguimientos"
        [selectedLote]="selectedLote"
        [loading]="loading">
      </app-tabla-lista-indicadores>
    </div>

    <!-- GrÃ¡ficas Tab -->
    <div *ngIf="activeTab === 'grafica'" class="tab-panel">
      <app-graficas-principal
        [seguimientos]="seguimientos"
        [selectedLote]="selectedLote"
        [loading]="loading">
      </app-graficas-principal>
    </div>
  </div>
</div>
