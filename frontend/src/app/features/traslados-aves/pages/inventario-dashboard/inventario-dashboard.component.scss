/* ==========================================================================
   üêî Inventario Dashboard + Modal Traslado ‚Äî UI SanMarino (unificado)
   ========================================================================== */

/* ========== 1) Design Tokens (variables) ========== */
:host {
  display: block;
  min-height: 100vh;

  /* Paleta corporativa - Alineada con otros m√≥dulos */
  --brand-red: #d32f2f;
  --brand-red-600: #c62828;
  --brand-red-700: #b71c1c;
  --brand-red-light: #ffebee;
  
  --chicken-yellow: #f7d24c;
  --amber-25: #fffbeb;
  --amber-50: #fff7ed;
  --amber-100: #fef3c7;
  --amber-200: #fde68a;

  --warm-25: #fdfdfc;
  --warm-50: #fafaf9;
  --warm-100: #f5f5f4;
  --warm-200: #e7e5e4;
  --warm-300: #d6d3d1;
  --warm-400: #a8a29e;
  --warm-500: #78716c;
  --warm-600: #57534e;

  --corporate-red: var(--brand-red);
  --corporate-red-light: var(--brand-red-light);
  --corporate-red-dark: var(--brand-red-700);

  --corporate-yellow: var(--amber-100);
  --corporate-yellow-light: var(--amber-50);
  --corporate-yellow-dark: #d97706;

  --corporate-gray: var(--warm-600);
  --corporate-gray-light: var(--warm-100);
  --corporate-gray-dark: #111111;

  /* Grises */
  --gray-50: #fafafa;
  --gray-100: #f5f5f5;
  --gray-200: #eeeeee;
  --gray-300: #e0e0e0;
  --gray-400: #bdbdbd;
  --gray-500: #9e9e9e;
  --gray-600: #757575;
  --gray-700: #616161;
  --gray-800: #424242;
  --gray-900: #212121;

  --white: #fff;

  /* Sombras y radios */
  --shadow-sm: 0 2px 4px rgba(0,0,0,.08);
  --shadow-md: 0 6px 14px rgba(0,0,0,.10);
  --shadow-lg: 0 10px 22px rgba(0,0,0,.14);

  --radius-sm: .5rem;
  --radius-md: .75rem;
  --radius-lg: 1rem;
  --radius-xl: 1.25rem;

  /* Espaciados */
  --space-1: .25rem;
  --space-2: .5rem;
  --space-3: .75rem;
  --space-4: 1rem;
  --space-5: 1.25rem;
  --space-6: 1.5rem;
  --space-8: 2rem;
  --space-10: 2.5rem;
  --space-12: 3rem;

  /* Inputs (tema) */
  --input-border: var(--gray-300);
  --input-border-focus: var(--corporate-red);
  --input-border-error: #d32f2f;
}
/* ========== 2) Layout base (ajustado) ========== */
.ux-page {
  display: flex;
  min-height: 100vh;
  background: var(--warm-100);
}

.ux-sidebar {
  flex: 0 0 280px;       /* <‚Äî en vez de usar margin-left en .ux-main */
  width: 280px;
  background: var(--white);
  box-shadow: var(--shadow-lg);
  z-index: 50;
}

/* Main ahora no tiene margin-left; llena todo el espacio restante */
.ux-main {
  flex: 1 1 auto;
  min-width: 0;          /* <‚Äî permite que tablas flexibles no desborden */
  padding: var(--space-8);
  overflow: hidden;       /* evita scroll-x global */
}

/* ========== 3) Header ========== */
.ux-header {
  display: flex;
  gap: var(--space-6);
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-8);
  padding: var(--space-6);
  background: var(--white);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  border: 1px solid var(--warm-200);
  position: relative;
}

.ux-header::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 3px;
  background: var(--chicken-yellow);
  border-radius: 2px;
}

.ux-header__title h1 {
  margin: 0 0 var(--space-2) 0;
  font-weight: 800;
  color: var(--brand-red);
  font-size: 1.5rem;
}
.ux-header__subtitle { 
  margin: 0; 
  color: var(--warm-600); 
  font-size: 0.92rem;
  opacity: 0.9;
}
.ux-header__actions { display: flex; gap: var(--space-3); }

/* ========== 4) Cards contenedor ========== */
.ux-card {
  background: var(--white);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  margin-bottom: var(--space-6);
  border: 1px solid var(--gray-200);
  position: relative;
  overflow: visible; /* permite dropdowns fuera del card */
}

.ux-card__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-4);
  padding: var(--space-6);
  background: var(--white);
  border-bottom: 1px solid var(--warm-200);
}

.ux-card__header h2 {
  margin: 0;
  font-weight: 700;
  color: var(--brand-red);
  font-size: 1.3rem;
}

.ux-card__content {
  padding: var(--space-6);
  overflow: visible;
}

/* ========== 5) Resumen (cards peque√±as) ========== */
.dashboard-summary { margin-bottom: var(--space-8); }

.summary-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: var(--space-6);
}

.summary-card {
  display: flex; align-items: center; gap: var(--space-4);
  padding: var(--space-6);
  border-radius: var(--radius-xl);
  background: var(--white);
  box-shadow: var(--shadow-md);
  border: 1px solid var(--warm-200);
  position: relative;
  transition: all 0.3s ease;
}
.summary-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
  border-color: var(--warm-300);
}

/* ========== 6) Filtros superiores ========== */
.filters-section {
  background: var(--white);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  border: 1px solid var(--warm-200);
  margin-bottom: var(--space-6);
  overflow: visible; /* evita recortes de dropdown */
}

.filters-header {
  display: flex; justify-content: space-between; align-items: center;
  padding: var(--space-5);
  background: var(--white);
  border-bottom: 1px solid var(--warm-200);
}

.filters-content { padding: var(--space-5); overflow: visible; }

.filter-row {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: var(--space-4);
  margin-bottom: var(--space-4);
}

.filter-group { display: flex; flex-direction: column; gap: var(--space-2); }
.filter-label { font-weight: 600; color: var(--corporate-gray); }

.filter-control,
.ux-input,
.ux-select,
.ux-textarea,
input[type="text"],
input[type="number"],
input[type="date"],
select,
textarea {
  padding: .6rem .75rem;
  border: 2px solid var(--input-border);
  border-radius: var(--radius-md);
  background: var(--white);
  transition: border-color .15s, box-shadow .15s;
}

/* Foco (borde rojo) */
.filter-control:focus,
.ux-input:focus,
.ux-select:focus,
.ux-textarea:focus,
input:focus,
select:focus,
textarea:focus {
  outline: none;
  border-color: var(--input-border-focus);
  box-shadow: 0 0 0 3px rgba(211,47,47,.12);
}

/* Invalid (Angular) */
.is-invalid,
.ng-invalid.ng-touched,
.ng-invalid.ng-dirty {
  border-color: var(--input-border-error) !important;
  box-shadow: 0 0 0 3px rgba(211,47,47,.14) !important;
}

/* Filtros aplicados */
.filters-applied {
  margin-top: var(--space-4);
  padding-top: var(--space-4);
  border-top: 1px solid var(--gray-200);
}
.filter-chips { display: flex; flex-wrap: wrap; gap: var(--space-2); }
.filter-chip {
  display: inline-flex; align-items: center; gap: var(--space-2);
  padding: .35rem .55rem;
  background: var(--amber-100);
  color: var(--brand-red);
  border: 1px solid var(--warm-300);
  border-radius: var(--radius-md);
  font-size: .75rem;
}
.filter-chip button {
  background: none; border: 0; color: inherit; cursor: pointer;
  width: 18px; height: 18px; border-radius: 50%;
}

/* ========== 7) Tabla ========== */
.table-container { width: 100%; overflow-x: auto; }

.ux-table {
  width: 100%;
  border-collapse: collapse;
  font-size: .9rem;
  background: var(--white);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
}

.ux-table th, .ux-table td {
  padding: var(--space-4) var(--space-5);
  border-bottom: 1px solid var(--gray-200);
  text-align: left;
  white-space: nowrap;
}

.ux-table th {
  background: var(--warm-50);
  font-weight: 700;
  color: var(--warm-600);
  font-size: .75rem;
  text-transform: uppercase;
  letter-spacing: .4px;
}

.ux-row {
  cursor: pointer;
  transition: background-color .2s ease, transform .1s ease;
}
.ux-row:hover {
  background: var(--warm-50);
  transform: translateX(2px);
}
.ux-row.selected {
  background: var(--amber-25);
  border-left: 4px solid var(--brand-red);
  font-weight: 600;
}
.ux-row.selected:hover {
  background: var(--amber-50);
}

.number-cell { text-align: right; font-variant-numeric: tabular-nums; }
.number-cell.success { color: #16a34a; }
.number-cell.info    { color: #0ea5e9; }
.number-cell.primary { color: var(--corporate-red-dark); }

/* ========== 8) Estados (loading/error/empty) ========== */
.loading-state,
.error-state,
.empty-state {
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  gap: var(--space-3);
  padding: var(--space-12);
  text-align: center;
  background: var(--white);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  border: 2px solid var(--corporate-yellow-light);
}
.spinner {
  width: 44px; height: 44px;
  border: 4px solid var(--warm-200);
  border-top: 4px solid var(--brand-red);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }
.error-state { color: var(--corporate-red); border-color: var(--corporate-red-light); }

/* ========== 9) Botones generales ========== */
.btn {
  display: inline-flex; align-items: center; gap: var(--space-2);
  padding: var(--space-3) var(--space-5);
  border: 0; border-radius: var(--radius-md);
  font-weight: 600; cursor: pointer;
  transition: background .2s, transform .1s, box-shadow .2s;
}
.btn--primary {
  background: var(--brand-red);
  color: var(--white);
  box-shadow: var(--shadow-md);
  border: 1px solid var(--brand-red);
}
.btn--primary:hover {
  background: var(--brand-red-600);
  border-color: var(--brand-red-600);
}
.btn--primary:hover { transform: translateY(-1px); }
.btn--secondary {
  background: var(--white);
  color: var(--brand-red);
  border: 1px solid var(--brand-red);
  box-shadow: var(--shadow-sm);
}
.btn--secondary:hover {
  background: var(--amber-25);
  transform: translateY(-1px);
}
.btn--outline {
  background: transparent; 
  color: var(--brand-red);
  border: 1px solid var(--brand-red);
}
.btn--outline:hover { 
  background: var(--brand-red); 
  color: var(--white); 
}
.btn--ghost {
  background: transparent; 
  color: var(--warm-600);
  border: 1px solid var(--warm-300);
}
.btn--ghost:hover { 
  background: var(--warm-50); 
  border-color: var(--warm-400);
}
.btn--sm { padding: var(--space-2) var(--space-3); font-size: .8rem; }

/* Acciones de fila */
.action-buttons { display: inline-flex; gap: .35rem; }
.icon-btn {
  display: inline-flex; align-items: center; justify-content: center;
  width: 34px; height: 34px; border-radius: .55rem; border: 1px solid var(--gray-300);
  background: var(--white); cursor: pointer;
  transition: background .15s, transform .05s, border-color .15s;
}
.icon-btn:hover { background: var(--corporate-yellow-light); border-color: var(--corporate-red); }
.icon-btn--danger:hover { border-color: #ef4444; background: #fee2e2; }

/* ========== 10) Paginaci√≥n ========== */
.pagination-container { margin-top: var(--space-6); }
.pagination {
  display: flex; justify-content: center; align-items: center; gap: var(--space-2);
  padding: var(--space-4);
  background: var(--white);
  border: 1px solid var(--corporate-yellow-light);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
}
.pagination__btn {
  padding: var(--space-2) var(--space-3);
  border: 1px solid var(--gray-300);
  background: var(--white);
  border-radius: var(--radius-md);
  font-weight: 500;
  cursor: pointer;
}
.pagination__btn:disabled { opacity: .5; cursor: not-allowed; }

/* ========== 11) Modal de Registro de Traslado ========== */
.modal-overlay {
  position: fixed; inset: 0;
  background: rgba(0,0,0,.55);
  display: flex; align-items: center; justify-content: center;
  z-index: 1200;
  backdrop-filter: blur(3px);
}

.modal-container {
  width: min(980px, 96vw);
  max-height: 90vh;
  background: var(--white);
  border-radius: var(--radius-xl);
  border: 2px solid var(--corporate-yellow);
  box-shadow: var(--shadow-lg);
  display: flex; flex-direction: column;
  overflow: hidden; /* header/footer fijos, body scrollea */
  animation: fadeIn .25s ease-out;
}
@keyframes fadeIn { from { transform: translateY(-15px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

.modal-header {
  display: flex; align-items: center; justify-content: space-between; gap: var(--space-3);
  padding: var(--space-5) var(--space-6);
  background: linear-gradient(135deg, var(--corporate-yellow-light), var(--corporate-yellow));
  border-bottom: 1px solid var(--gray-200);
}
.modal-header h2 {
  margin: 0; font-weight: 700; color: var(--corporate-gray-dark);
}
.modal-close {
  border: none; background: transparent; font-size: 1.25rem; color: var(--corporate-gray);
  cursor: pointer; transition: color .2s;
}
.modal-close:hover { color: var(--corporate-red); }

.modal-body {
  padding: var(--space-6);
  overflow: auto; /* scroll interno */
}
.modal-footer {
  display: flex; justify-content: flex-end; gap: var(--space-3);
  padding: var(--space-5) var(--space-6);
  background: var(--gray-50);
  border-top: 1px solid var(--gray-200);
}
.modal-footer .btn { min-width: 130px; justify-content: center; }
.modal-footer .btn--primary { background: var(--corporate-red); color: var(--white); }
.modal-footer .btn--primary:disabled { opacity: .6; cursor: not-allowed; }
.modal-footer .btn--outline { border: 2px solid var(--corporate-red); color: var(--corporate-red); }
.modal-footer .btn--outline:hover { background: var(--corporate-red); color: var(--white); }

/* Paso 1: selecci√≥n de lotes */
.step-section { margin-bottom: var(--space-8); }
.step-header { display: flex; align-items: center; gap: var(--space-3); margin-bottom: var(--space-4); }
.step-number {
  width: 28px; height: 28px; border-radius: 50%;
  background: var(--corporate-red); color: var(--white); font-size: .8rem; font-weight: 700;
  display: flex; align-items: center; justify-content: center;
}
.step-title { margin: 0; font-weight: 700; color: var(--corporate-gray-dark); }

.lote-selection-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(280px, 1fr));
  gap: var(--space-6);
}
.lote-filter-section {
  background: var(--gray-50);
  border: 1px solid var(--gray-200);
  border-radius: var(--radius-lg);
  padding: var(--space-4);
  box-shadow: var(--shadow-sm);
  overflow: visible; /* para dropdown interno */
}
.filter-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-3); }
.filter-title { margin: 0; font-weight: 600; color: var(--corporate-red); }
.filter-status { font-size: .8rem; color: var(--gray-700); }
.filter-status.selected { color: #16a34a; }

/* Inputs dentro del modal: ya heredan foco/error rojo de secci√≥n 6 */

/* Asegurar overlays sobre el modal */
.cdk-overlay-container, .cdk-overlay-pane { z-index: 1300 !important; }
.hierarchical-filter-panel,
.dropdown-panel,
.autocomplete-panel { z-index: 1300 !important; }

/* ========== 12) Responsivo ========== */
@media (max-width: 1200px) {
  .ux-main { padding: var(--space-6); }
}
@media (max-width: 1024px) {
  .ux-main { /* sin margin-left */ }
  .ux-sidebar { position: fixed; left: -280px; top: 0; bottom: 0; transition: left .25s; }
  .ux-sidebar.open { left: 0; }
}
@media (max-width: 768px) {
  .ux-header { flex-direction: column; align-items: stretch; }
  .filter-row { grid-template-columns: 1fr; }
  .modal-container { width: 96vw; }
}
@media (max-width: 480px) {
  .ux-main { padding: var(--space-4); }
  .ux-card__content { padding: var(--space-4); }
  .modal-body { padding: var(--space-4); }
}

/* ========== 13) Estados de deshabilitado global (opcional) ========== */
:disabled,
[disabled] {
  opacity: .7;
  background: var(--gray-50);
}

/* ========== 14) Detalles del Lote Seleccionado ========== */
.lote-details-section {
  margin-top: var(--space-6);
  animation: slideInUp .3s ease-out;
}
@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.lote-info-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: var(--space-4);
  margin-bottom: var(--space-6);
}

.info-card {
  background: var(--gray-50);
  border: 2px solid var(--gray-200);
  border-radius: var(--radius-lg);
  padding: var(--space-4);
  transition: box-shadow .2s, transform .1s;
}
.info-card:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}
.info-card__title {
  margin: 0 0 var(--space-3) 0;
  font-size: .9rem;
  font-weight: 700;
  color: var(--corporate-gray-dark);
  text-transform: uppercase;
  letter-spacing: .5px;
}
.info-card__content {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.stat-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-2) 0;
  border-bottom: 1px dashed var(--gray-300);
}
.stat-item:last-child {
  border-bottom: none;
}
.stat-label {
  font-weight: 600;
  color: var(--corporate-gray);
}
.stat-value {
  font-weight: 700;
  font-variant-numeric: tabular-nums;
}
.stat-value.success { color: #16a34a; }
.stat-value.info { color: #0ea5e9; }
.stat-value.primary {
  color: var(--corporate-red-dark);
  font-size: 1.1rem;
}

.info-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-2) 0;
  border-bottom: 1px dashed var(--gray-300);
}
.info-row:last-child {
  border-bottom: none;
}
.info-label {
  font-weight: 600;
  color: var(--corporate-gray);
  font-size: .85rem;
}
.info-value {
  color: var(--corporate-gray-dark);
  font-weight: 500;
  text-align: right;
}

/* Movimientos del Lote */
.movimientos-section {
  margin-top: var(--space-6);
  padding-top: var(--space-6);
  border-top: 2px solid var(--gray-200);
}
.movimientos-title {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  margin: 0 0 var(--space-4) 0;
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--corporate-gray-dark);
}
.movimientos-table-container {
  overflow-x: auto;
  border-radius: var(--radius-lg);
  border: 1px solid var(--gray-200);
}
.movimientos-table {
  width: 100%;
  border-collapse: collapse;
  font-size: .85rem;
  background: var(--white);
}
.movimientos-table thead {
  position: sticky;
  top: 0;
  z-index: 10;
  background: var(--warm-50);
}
.movimientos-table th {
  padding: var(--space-3) var(--space-4);
  border-bottom: 2px solid var(--gray-300);
  font-weight: 700;
  color: var(--corporate-gray-dark);
  font-size: .75rem;
  text-transform: uppercase;
  letter-spacing: .5px;
  text-align: left;
}
.movimientos-table td {
  padding: var(--space-3) var(--space-4);
  border-bottom: 1px solid var(--gray-200);
  color: var(--corporate-gray-dark);
}
.movimientos-table tbody tr:hover {
  background: var(--corporate-yellow-light);
}
.movimientos-table tbody tr:nth-child(even) {
  background: var(--gray-50);
}
.movimientos-table tbody tr:nth-child(even):hover {
  background: var(--corporate-yellow-light);
}

.ubicacion-cell {
  font-size: .8rem;
}
.ubicacion-cell strong {
  color: var(--corporate-gray-dark);
  font-weight: 600;
}
.ubicacion-cell small {
  color: var(--gray-600);
  font-size: .75rem;
}
.motivo-cell {
  max-width: 200px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-size: .8rem;
  color: var(--gray-700);
}
.mov-number {
  background: var(--gray-100);
  padding: .2rem .4rem;
  border-radius: 4px;
  font-family: 'Monaco', 'Courier New', monospace;
  font-size: .75rem;
  color: var(--corporate-red-dark);
}

/* Badges */
.badge {
  display: inline-flex;
  align-items: center;
  padding: .25rem .5rem;
  border-radius: var(--radius-sm);
  font-size: .75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: .3px;
}
.badge--success {
  background: #dcfce7;
  color: #16a34a;
}
.badge--danger {
  background: #fee2e2;
  color: #dc2626;
}
.badge--warning {
  background: #fef3c7;
  color: #d97706;
}
.badge--info {
  background: #dbeafe;
  color: #2563eb;
}
.badge--default {
  background: var(--gray-200);
  color: var(--corporate-gray-dark);
}
.badge--primary {
  background: var(--brand-red-light);
  color: var(--brand-red);
}
.badge--error {
  background: #fee2e2;
  color: #dc2626;
}

/* Utilidades */
.text-xs { font-size: .75rem; }
.text-sm { font-size: .875rem; }
.mt-1 { margin-top: var(--space-1); }
.mt-2 { margin-top: var(--space-2); }
.flex { display: flex; }
.items-center { align-items: center; }
.justify-between { justify-content: space-between; }
.w-full { width: 100%; }

/* ========== 15) Modal Traslado/Retiro Grande ========== */
.modal-overlay--large {
  z-index: 1400;
}
.modal-container--large {
  width: min(95vw, 1200px);
  max-height: 95vh;
  border-radius: 1.5rem;
}
.modal-header--large {
  padding: var(--space-6);
  h2 {
    font-size: 1.5rem;
    display: flex;
    align-items: center;
    gap: var(--space-3);
  }
}
.modal-body--large {
  padding: var(--space-6);
  max-height: calc(95vh - 180px);
  overflow-y: auto;
}
.modal-footer--large {
  padding: var(--space-5) var(--space-6);
}

/* Modal XXL con Tabs - Mejorado */
.modal-overlay--xxl {
  z-index: 1400;
  backdrop-filter: blur(4px);
}
.modal-container--xxl {
  width: min(98vw, 1600px);
  max-height: 98vh;
  border-radius: 1.5rem;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  animation: modalSlideIn 0.3s ease-out;
}
@keyframes modalSlideIn {
  from {
    opacity: 0;
    transform: scale(0.95) translateY(-20px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}
.modal-header--xxl {
  padding: var(--space-6) var(--space-8);
  background: linear-gradient(135deg, #fffde7, #fff8e1);
  border-bottom: 3px solid var(--corporate-red);
  h2 {
    font-size: 1.75rem;
    display: flex;
    align-items: center;
    gap: var(--space-3);
    margin: 0;
    font-weight: 800;
    color: var(--corporate-red-dark);
  }
}
.modal-body--xxl {
  padding: var(--space-8);
  max-height: calc(98vh - 200px);
  overflow-y: auto;
  background: linear-gradient(to bottom, #fafafa, #ffffff);
}
.modal-footer--xxl {
  padding: var(--space-6) var(--space-8);
  display: flex;
  justify-content: flex-end;
  gap: var(--space-4);
  background: #fafafa;
  border-top: 2px solid var(--gray-200);
  .btn {
    min-width: 160px;
    padding: var(--space-4) var(--space-6);
    font-size: 1rem;
    font-weight: 600;
  }
}

/* Tabs CSS-only - Mejorados */
.modal-tabs {
  display: flex;
  flex-direction: column;
  margin-top: var(--space-6);

  &--enhanced {
    margin-top: var(--space-8);
  }
}

.modal-tabs input[type="radio"] {
  display: none;
}

.modal-tabs .tab-label {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-3) var(--space-5);
  background: var(--gray-100);
  border: 2px solid transparent;
  border-radius: var(--radius-md) var(--radius-md) 0 0;
  cursor: pointer;
  font-weight: 600;
  color: var(--gray-600);
  transition: all 0.2s;
  margin-right: var(--space-2);

  &--enhanced {
    padding: var(--space-4) var(--space-6);
    font-size: 1.05rem;
    position: relative;
    border-bottom: 3px solid transparent;

    &:hover {
      background: var(--corporate-yellow-light);
      color: var(--corporate-red);
      transform: translateY(-2px);
    }
  }
}

.modal-tabs input[type="radio"]:checked + .tab-label {
  background: var(--white);
  border-color: var(--corporate-red);
  border-bottom-color: transparent;
  color: var(--corporate-red);
  position: relative;
  z-index: 1;

  &.tab-label--enhanced {
    border-bottom: 3px solid var(--corporate-red);
    box-shadow: 0 -2px 8px rgba(211, 47, 47, 0.1);
  }
}

.tab-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 28px;
  height: 28px;
  padding: 0 var(--space-2);
  background: var(--corporate-red);
  color: var(--white);
  border-radius: 50%;
  font-size: 0.75rem;
  font-weight: 700;
  margin-left: var(--space-2);
  box-shadow: 0 2px 4px rgba(211, 47, 47, 0.3);
}

.tab-panels {
  position: relative;
  background: var(--white);
  border: 2px solid var(--corporate-red);
  border-radius: 0 var(--radius-lg) var(--radius-lg) var(--radius-lg);
  padding: var(--space-8);
  min-height: 500px;
  box-shadow: 0 4px 12px rgba(211, 47, 47, 0.08);
}

.tab-panel {
  display: block;

  &--enhanced {
    animation: fadeInTab 0.3s ease-out;
  }
}

@keyframes fadeInTab {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.tab-icon {
  font-size: 1.25rem;
}

.tab-text {
  font-size: 1rem;
}

/* Informaci√≥n del Lote - Mejorada */
.lote-info-section {
  margin-bottom: var(--space-8);
}

.lote-info-card {
  background: linear-gradient(135deg, #fff9f0, #fffbf5);
  border: 2px solid var(--corporate-yellow);
  border-radius: var(--radius-lg);
  padding: var(--space-6);
  box-shadow: 0 4px 12px rgba(211, 47, 47, 0.08);
  transition: all 0.3s ease;

  &:hover {
    box-shadow: 0 6px 20px rgba(211, 47, 47, 0.12);
    transform: translateY(-2px);
  }

  &--enhanced {
    border-left: 5px solid var(--corporate-red);
  }
}

.lote-info-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-5);
  padding-bottom: var(--space-3);
  border-bottom: 2px solid var(--corporate-yellow);

  h3 {
    margin: 0;
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--corporate-red-dark);
    display: flex;
    align-items: center;
    gap: var(--space-2);
  }
}

.lote-id-badge {
  display: inline-flex;
  align-items: center;
  padding: var(--space-2) var(--space-4);
  background: var(--corporate-red);
  color: var(--white);
  border-radius: var(--radius-md);
  font-weight: 700;
  font-size: 1rem;
  box-shadow: 0 2px 8px rgba(211, 47, 47, 0.3);
}

.lote-info-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: var(--space-4);

  &--enhanced {
    gap: var(--space-5);
  }
}

.info-item {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);

  &--enhanced {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-4);
    background: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-md);
    transition: all 0.2s ease;

    &:hover {
      background: var(--corporate-yellow-light);
      border-color: var(--corporate-red-light);
      transform: translateX(4px);
    }
  }
}

.info-icon {
  font-size: 1.5rem;
  flex-shrink: 0;
}

.info-content {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
  flex: 1;
}

.info-label {
  font-size: 0.875rem;
  color: var(--gray-600);
  font-weight: 500;

  .info-item--enhanced & {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--gray-500);
  }
}

.info-value {
  font-size: 1rem;
  color: var(--gray-900);
  font-weight: 600;

  .info-item--enhanced & {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--corporate-gray-dark);
  }
}

.phase-badge {
  display: inline-block;
  padding: 0.25rem 0.5rem;
  border-radius: var(--radius-sm);
  font-size: 0.75rem;
  font-weight: 600;
  margin-left: var(--space-2);

  &--enhanced {
    padding: var(--space-1) var(--space-3);
    font-size: 0.8rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
}

.phase-badge.phase-levante {
  background: #dbeafe;
  color: #1e40af;

  &.phase-badge--enhanced {
    background: linear-gradient(135deg, #dbeafe, #bfdbfe);
    color: #1e3a8a;
    border: 1px solid #3b82f6;
  }
}

.phase-badge.phase-produccion {
  background: #fef3c7;
  color: #92400e;

  &.phase-badge--enhanced {
    background: linear-gradient(135deg, #fef3c7, #fde68a);
    color: #78350f;
    border: 1px solid #f59e0b;
  }
}

/* Disponibilidad Section - Mejorada */
.disponibilidad-section {
  background: var(--gray-50);
  border: 1px solid var(--gray-200);
  border-radius: var(--radius-md);
  padding: var(--space-5);
  margin-bottom: var(--space-6);

  &--enhanced {
    background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
    border: 2px solid var(--corporate-yellow);
    border-radius: var(--radius-lg);
    padding: var(--space-6);
    box-shadow: 0 4px 12px rgba(211, 47, 47, 0.08);
  }
}

.disponibilidad-header {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
  margin-bottom: var(--space-5);
  padding-bottom: var(--space-3);
  border-bottom: 2px solid var(--corporate-yellow);

  h4 {
    margin: 0;
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--corporate-red-dark);
  }
}

.disponibilidad-subtitle {
  font-size: 0.875rem;
  color: var(--gray-600);
  font-style: italic;
}

.disponibilidad-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: var(--space-3);
  margin-bottom: var(--space-4);

  &--enhanced {
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space-4);
  }
}

.disponibilidad-card {
  background: var(--white);
  border: 1px solid var(--gray-300);
  border-radius: var(--radius-sm);
  padding: var(--space-3);
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
  transition: all 0.2s ease;

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }

  &.highlight {
    background: linear-gradient(135deg, var(--corporate-yellow), #fff8e1);
    border-color: var(--corporate-yellow-dark);
    box-shadow: 0 4px 12px rgba(211, 47, 47, 0.15);
  }

  &--hembras {
    border-left: 4px solid #16a34a;
  }

  &--machos {
    border-left: 4px solid #0ea5e9;
  }

  &--total {
    border-left: 4px solid var(--corporate-red);
  }

  &--incubables {
    border-left: 4px solid #f59e0b;
  }
}

.disponibilidad-icon {
  font-size: 2rem;
  text-align: center;
  margin-bottom: var(--space-2);
}

.disponibilidad-content {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
  align-items: center;
  text-align: center;
}

.disponibilidad-label {
  font-size: 0.875rem;
  color: var(--gray-600);
  font-weight: 500;
}

.disponibilidad-value {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--gray-900);

  .disponibilidad-card--hembras & {
    color: #16a34a;
  }

  .disponibilidad-card--machos & {
    color: #0ea5e9;
  }

  .disponibilidad-card--total & {
    color: var(--corporate-red-dark);
    font-size: 1.75rem;
  }

  .disponibilidad-card--incubables & {
    color: #f59e0b;
  }
}

.huevos-tipos-disponibles {
  margin-top: var(--space-4);
  padding-top: var(--space-4);
  border-top: 1px solid var(--gray-300);

  &--enhanced {
    margin-top: var(--space-6);
    padding-top: var(--space-6);
    border-top: 2px solid var(--corporate-yellow);
  }

  h5 {
    margin: 0 0 var(--space-4) 0;
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--corporate-gray-dark);
  }
}

.huevos-tipos-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: var(--space-2);

  &--enhanced {
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: var(--space-3);
  }
}

.huevo-tipo-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-2);
  background: var(--white);
  border: 1px solid var(--gray-200);
  border-radius: var(--radius-sm);
  font-size: 0.875rem;
  transition: all 0.2s ease;

  &:hover {
    background: var(--corporate-yellow-light);
    border-color: var(--corporate-red-light);
    transform: translateX(4px);
  }

  &--enhanced {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3) var(--space-4);
    border: 1px solid var(--gray-300);
    border-radius: var(--radius-md);
    background: linear-gradient(135deg, #fff, #fafafa);
  }
}

.tipo-icon {
  font-size: 1.25rem;
  flex-shrink: 0;
}

.tipo-content {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
  flex: 1;
}

.tipo-label {
  color: var(--gray-600);
  font-size: 0.8rem;
  font-weight: 500;

  .huevo-tipo-item--enhanced & {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--gray-500);
  }
}

.tipo-value {
  font-weight: 600;
  color: var(--gray-900);
  font-size: 1rem;

  .huevo-tipo-item--enhanced & {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--corporate-red-dark);
  }
}

/* Form Sections */
.traslado-form {
  display: flex;
  flex-direction: column;
  gap: var(--space-6);
}

.form-section {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.form-section h4 {
  margin: 0;
  font-size: 1.1rem;
  color: var(--gray-800);
  padding-bottom: var(--space-2);
  border-bottom: 2px solid var(--gray-200);
}

.tipo-operacion-selector {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-4);
}

.operacion-option {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-4);
  border: 2px solid var(--gray-300);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.2s;
  background: var(--white);
}

.operacion-option:hover {
  border-color: var(--corporate-red);
  background: var(--corporate-red-light);
}

.operacion-option.selected {
  border-color: var(--corporate-red);
  background: var(--corporate-red-light);
}

.operacion-icon {
  font-size: 1.5rem;
}

.operacion-text {
  font-weight: 600;
  color: var(--gray-800);
}

.form-grid-2 {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-4);
}

.form-grid-3 {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-4);
}

.cantidades-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-4);
}

.huevos-cantidades-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: var(--space-4);
}

.max-disponible {
  font-size: 0.875rem;
  color: var(--gray-500);
  font-weight: 400;
}

@media (max-width: 1200px) {
  .form-grid-3 {
    grid-template-columns: repeat(2, 1fr);
  }
  .huevos-cantidades-grid {
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  }
}

@media (max-width: 768px) {
  .form-grid-2,
  .form-grid-3,
  .cantidades-grid {
    grid-template-columns: 1fr;
  }
  .tipo-operacion-selector {
    grid-template-columns: 1fr;
  }
}

.lote-origen-section {
  background: var(--gray-50);
  border: 2px solid var(--gray-200);
  border-radius: var(--radius-lg);
  padding: var(--space-5);
  margin-bottom: var(--space-6);

  h3 {
    margin: 0 0 var(--space-4) 0;
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--corporate-red-dark);
  }
}

.lote-info-grid-inline {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--space-4);
}

.lote-info-item {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);

  .label {
    font-size: .8rem;
    font-weight: 600;
    color: var(--gray-600);
    text-transform: uppercase;
    letter-spacing: .5px;
  }

  .value {
    font-size: 1rem;
    font-weight: 700;
    color: var(--corporate-gray-dark);

    .phase-badge {
      display: inline-block;
      padding: .2rem .5rem;
      margin-left: var(--space-2);
      border-radius: var(--radius-sm);
      font-size: .75rem;
      font-weight: 600;
      text-transform: uppercase;

      &.phase-levante {
        background: #dbeafe;
        color: #2563eb;
      }

      &.phase-produccion {
        background: #fef3c7;
        color: #d97706;
      }
    }
  }
}

.lote-badge {
  display: inline-block;
  padding: .25rem .75rem;
  margin-left: var(--space-3);
  background: var(--corporate-red);
  color: var(--white);
  border-radius: var(--radius-md);
  font-size: .85rem;
  font-weight: 600;
}

.traslado-retiro-form {
  .form-section {
    margin-bottom: var(--space-6);

    h4 {
      margin: 0 0 var(--space-4) 0;
      font-size: 1rem;
      font-weight: 700;
      color: var(--corporate-gray-dark);
    }
  }
}

.tipo-movimiento-selector {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-4);
}

.tipo-option {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-5);
  border: 3px solid var(--gray-300);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all .2s ease;
  background: var(--white);

  input[type="radio"] {
    display: none;
  }

  .tipo-icon {
    font-size: 2rem;
  }

  .tipo-text {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--corporate-gray-dark);
  }

  .tipo-description {
    font-size: .85rem;
    color: var(--gray-600);
    text-align: center;
  }

  &:hover {
    border-color: var(--corporate-red-light);
    background: var(--corporate-yellow-light);
  }

  &.selected {
    border-color: var(--corporate-red);
    background: linear-gradient(135deg, var(--corporate-yellow-light), var(--corporate-yellow));
    box-shadow: 0 4px 12px rgba(211, 47, 47, .2);
  }
}

.form-grid-2 {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-4);
}

.cantidades-grid-large {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-4);

  .cantidad-field {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);

    .max-disponible {
      font-size: .75rem;
      color: var(--gray-600);
      font-weight: normal;
      margin-left: var(--space-1);
    }

    .cantidad-input {
      font-size: 1.25rem;
      font-weight: 700;
      text-align: center;
      padding: var(--space-4);
    }
  }
}

.resumen-retiro {
  background: linear-gradient(135deg, var(--corporate-yellow-light), var(--corporate-yellow));
  border: 2px solid var(--corporate-yellow);
  border-radius: var(--radius-lg);
  padding: var(--space-5);

  h4 {
    margin: 0 0 var(--space-3) 0;
    font-size: 1rem;
    font-weight: 700;
    color: var(--corporate-gray-dark);
  }

  .resumen-items {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
  }

  .resumen-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .resumen-label {
    font-weight: 600;
    color: var(--corporate-gray);
  }

  .resumen-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--corporate-red-dark);
  }

  .resumen-breakdown {
    display: flex;
    gap: var(--space-3);
    margin-top: var(--space-2);
    flex-wrap: wrap;

    span {
      padding: .25rem .75rem;
      background: var(--white);
      border-radius: var(--radius-md);
      font-weight: 600;
      font-size: .9rem;
      color: var(--corporate-gray-dark);
    }
  }
}

/* ========== 16) Modales de Confirmaci√≥n Mejorados ========== */
.alert {
  display: flex;
  align-items: flex-start;
  gap: var(--space-3);
  padding: var(--space-4);
  border-radius: var(--radius-lg);
  border: 2px solid;
  margin-bottom: var(--space-4);

  &__icon {
    font-size: 1.5rem;
    flex-shrink: 0;
  }

  &__content {
    flex: 1;

    strong {
      display: block;
      margin-bottom: var(--space-1);
      font-weight: 700;
    }

    p {
      margin: var(--space-1) 0;
      line-height: 1.5;
    }

    small {
      display: block;
      margin-top: var(--space-2);
      opacity: 0.8;
      font-size: .85rem;
    }
  }
}

.alert--danger {
  background: linear-gradient(135deg, #fee2e2, #fecaca);
  border-color: #dc2626;
  color: #991b1b;

  .alert__icon {
    color: #dc2626;
  }
}

.alert--success {
  background: linear-gradient(135deg, #dcfce7, #bbf7d0);
  border-color: #16a34a;
  color: #166534;
}

.alert-animated {
  animation: slideInDown .3s ease-out;
}

@keyframes slideInDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.success-modal {
  background: linear-gradient(135deg, #dcfce7, #bbf7d0);
  border: 3px solid #16a34a;
  border-radius: var(--radius-xl);
  padding: var(--space-6);
  margin: var(--space-4) 0;
  box-shadow: 0 8px 24px rgba(22, 163, 74, 0.2);
  animation: successModalIn .4s ease-out;
}

.success-modal--large {
  padding: var(--space-8);
}

@keyframes successModalIn {
  from {
    opacity: 0;
    transform: scale(0.9) translateY(-10px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.success-modal__content {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  gap: var(--space-4);
}

.success-icon-animated {
  font-size: 4rem;
  animation: successIconPulse 1s ease-in-out infinite;
}

@keyframes successIconPulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
}

.success-title {
  margin: 0;
  font-size: 1.5rem;
  font-weight: 700;
  color: #166534;
}

.success-message {
  margin: 0;
  font-size: 1.1rem;
  color: #15803d;
  font-weight: 600;
}

.success-details {
  width: 100%;
  background: rgba(255, 255, 255, 0.7);
  border-radius: var(--radius-lg);
  padding: var(--space-4);
  margin-top: var(--space-2);
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.success-detail-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-2) 0;
  border-bottom: 1px dashed rgba(22, 163, 74, 0.3);

  &:last-child {
    border-bottom: none;
  }
}

.detail-label {
  font-weight: 600;
  color: #166534;
  font-size: .9rem;
}

.detail-value {
  font-weight: 700;
  color: #15803d;
  font-size: 1rem;

  .breakdown {
    font-weight: 500;
    font-size: .85rem;
    margin-left: var(--space-2);
  }
}

.success-check {
  color: #16a34a;

  &::before {
    content: '‚úì';
    display: inline-block;
    margin-right: var(--space-1);
    font-weight: 700;
    color: #16a34a;
  }
}

.loading-state--large {
  padding: var(--space-8);

  .spinner--large {
    width: 60px;
    height: 60px;
    border-width: 5px;
  }
}

.loading-text {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--corporate-gray-dark);
  margin: var(--space-3) 0 var(--space-1) 0;
}

.loading-subtext {
  font-size: .85rem;
  color: var(--gray-600);
  font-style: italic;
}

/* ========== 17) Mejoras Generales de UX ========== */
.filters-section {
  background: linear-gradient(135deg, #fff9f0, #fffbf5);
  border: 2px solid var(--corporate-yellow-light);
  border-radius: var(--radius-xl);
  padding: var(--space-5);
  margin-bottom: var(--space-6);
  box-shadow: 0 4px 12px rgba(211, 47, 47, 0.05);
}

.filters-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-4);

  h3 {
    margin: 0;
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--corporate-red-dark);
  }
}

.filter-row {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--space-4);
}

.summary-card {
  transition: all .3s ease;
  border: 2px solid transparent;

  &:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 20px rgba(211, 47, 47, 0.15);
    border-color: var(--corporate-red-light);
  }
}

.ux-card {
  border: 2px solid var(--gray-200);
  border-radius: var(--radius-xl);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  overflow: hidden;
  transition: box-shadow .3s ease;

  &:hover {
    box-shadow: 0 6px 20px rgba(211, 47, 47, 0.12);
  }
}

.ux-card__header {
  background: linear-gradient(135deg, var(--corporate-yellow-light), var(--corporate-yellow));
  border-bottom: 2px solid var(--corporate-yellow);
  padding: var(--space-5);

  h2 {
    margin: 0;
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--corporate-gray-dark);
  }
}

.date-cell {
  font-variant-numeric: tabular-nums;
  white-space: nowrap;
}

.lote-id {
  background: linear-gradient(135deg, var(--corporate-red-light), #ffcdd2);
  padding: .25rem .5rem;
  border-radius: var(--radius-sm);
  font-weight: 700;
  color: var(--corporate-red-dark);
}

@media (max-width: 768px) {
  .modal-container--large {
    width: 98vw;
    max-height: 98vh;
  }

  .tipo-movimiento-selector,
  .form-grid-2,
  .cantidades-grid-large {
    grid-template-columns: 1fr;
  }

  .lote-info-grid-inline {
    grid-template-columns: 1fr;
  }

  .filter-row {
    grid-template-columns: 1fr;
  }
}

/* =========================
   Inputs con alto contraste
   ========================= */
:host {
  --input-bg: #ffffff;
  --input-border: #bdbdbd;           /* gris medio (visible) */
  --input-border-hover: #9e9e9e;     /* gris m√°s fuerte */
  --input-border-focus: #c62828;     /* rojo foco */
  --input-border-error: #d32f2f;     /* rojo error */
  --input-ring: 0 0 0 3px rgba(198, 40, 40, .18);
  --input-ring-error: 0 0 0 3px rgba(211, 47, 47, .22);
}

/* Aplica a todos los campos de formulario del dashboard/modal */
.ux-input,
.filter-control,
.ux-select,
.ux-textarea,
input[type="text"],
input[type="number"],
input[type="date"],
input[type="email"],
input[type="search"],
input[type="tel"],
select,
textarea {
  background-color: var(--input-bg) !important;   /* evita transparencias */
  border: 2px solid var(--input-border) !important;
  border-radius: var(--radius-md);
  color: var(--corporate-gray-dark);
  transition: border-color .15s ease, box-shadow .15s ease, background-color .15s ease;
  box-shadow: none;                                /* limpia sombras azules del navegador */
  background-clip: padding-box;
}

.ux-input:hover,
.filter-control:hover,
.ux-select:hover,
.ux-textarea:hover,
input:hover,
select:hover,
textarea:hover {
  border-color: var(--input-border-hover) !important;
}

/* Foco bien marcado en rojo corporativo */
.ux-input:focus,
.filter-control:focus,
.ux-select:focus,
.ux-textarea:focus,
input:focus,
select:focus,
textarea:focus {
  outline: none;
  border-color: var(--input-border-focus) !important;
  box-shadow: var(--input-ring) !important;
}

/* Estado inv√°lido (Angular) */
.is-invalid,
.ng-invalid.ng-touched,
.ng-invalid.ng-dirty {
  border-color: var(--input-border-error) !important;
  box-shadow: var(--input-ring-error) !important;
  background-color: #fff7f7 !important;           /* leve tinte para indicar error */
}

/* Deshabilitados */
:disabled,
[disabled] {
  background-color: #f7f7f7 !important;
  border-color: #d6d6d6 !important;
  color: #9e9e9e !important;
  opacity: 1;                                      /* que no se ‚Äúdesaparezcan‚Äù */
}

/* Placeholders m√°s visibles */
::placeholder {
  color: #9e9e9e;
  opacity: 1;
}

/* Corrige el autofill de Chrome (amarillo) para mantener borde/fondo */
input:-webkit-autofill,
textarea:-webkit-autofill,
select:-webkit-autofill {
  -webkit-box-shadow: 0 0 0 1000px var(--input-bg) inset !important;
  -webkit-text-fill-color: var(--corporate-gray-dark) !important;
  border: 2px solid var(--input-border) !important;
}

/* Si usas inputs dentro de celdas claras, aseg√∫rate que el contenedor no los tape */
.ux-card,
.filters-section,
.lote-filter-section {
  background-color: #fff;
  overflow: visible;
}


/* ===== Modal (alineado y con alto contraste) ===== */
.modal-overlay {
  position: fixed; inset: 0;
  background: rgba(0,0,0,.55);
  backdrop-filter: blur(3px);
  display: flex; align-items: center; justify-content: center;
  z-index: 1200;
}
.modal-container {
  width: min(1000px, 96vw);
  max-height: 90vh;
  background: #fff;
  border-radius: 1.25rem;
  border: 1px solid var(--warm-200);
  box-shadow: 0 10px 22px rgba(0,0,0,.14);
  display: flex; flex-direction: column;
  overflow: hidden;
  animation: modalIn .2s ease-out;
}
@keyframes modalIn { from { transform: translateY(-12px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

.modal-header {
  display: flex; align-items: center; justify-content: space-between;
  gap: .75rem; padding: 1rem 1.5rem;
  background: var(--white);
  border-bottom: 1px solid var(--warm-200);
}
.modal-close { border: 0; background: transparent; font-size: 1.25rem; cursor: pointer; color: #616161; }
.modal-close:hover { color: #d32f2f; }

.modal-body { padding: 1.25rem 1.5rem; overflow: auto; }

.modal-footer {
  display: flex; justify-content: flex-end; gap: .5rem;
  padding: .9rem 1.5rem; background: #fafafa; border-top: 1px solid #e0e0e0;
}

/* Paso/secciones */
.step-section { margin-bottom: 1.25rem; }
.step-header { display: flex; align-items: center; gap: .5rem; margin-bottom: .25rem; }
.step-number {
  width: 26px; height: 26px; border-radius: 50%;
  display: grid; place-items: center; font-weight: 700; color: #fff; background: #d32f2f; font-size: .8rem;
}
.step-title { margin: 0; font-weight: 700; color: #212121; }
.step-description { margin: 0 0 .75rem 0; color: #616161; }

/* Grillas de formulario */
.grid { display: grid; gap: .75rem; }
.grid-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
.grid-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
@media (max-width: 960px) { .grid-3 { grid-template-columns: 1fr; } .grid-2 { grid-template-columns: 1fr; } }

.form-field { display: flex; flex-direction: column; gap: .35rem; }
.ux-label { font-weight: 600; color: #424242; }
.required { color: #d32f2f; margin-left: .15rem; }

/* Inputs/Selects visibles y con rojo al foco */
:host {
  --input-bg: #fff;
  --input-border: #bdbdbd;
  --input-border-hover: #9e9e9e;
  --input-border-focus: #c62828;
  --input-border-error: #d32f2f;
  --ring: 0 0 0 3px rgba(198,40,40,.18);
  --ring-error: 0 0 0 3px rgba(211,47,47,.22);
}
.ux-input, .ux-select, .ux-textarea, input, select, textarea {
  background: var(--input-bg) !important;
  border: 2px solid var(--input-border) !important;
  border-radius: .75rem; padding: .6rem .75rem; color: #212121;
  transition: border-color .15s, box-shadow .15s; box-shadow: none;
}
.ux-input:hover, .ux-select:hover, .ux-textarea:hover, input:hover, select:hover, textarea:hover {
  border-color: var(--input-border-hover) !important;
}
.ux-input:focus, .ux-select:focus, .ux-textarea:focus, input:focus, select:focus, textarea:focus {
  outline: none; border-color: var(--input-border-focus) !important; box-shadow: var(--ring) !important;
}
.is-invalid, .ng-invalid.ng-touched, .ng-invalid.ng-dirty {
  border-color: var(--input-border-error) !important; box-shadow: var(--ring-error) !important; background: #fff7f7 !important;
}
::placeholder { color: #9e9e9e; }

/* Lote filters */
.lote-selection-grid { display: grid; grid-template-columns: repeat(2, minmax(300px,1fr)); gap: 1rem; }
@media (max-width: 960px) { .lote-selection-grid { grid-template-columns: 1fr; } }
.lote-filter-section { background: #fafafa; border: 1px solid #e0e0e0; border-radius: 1rem; padding: .9rem; overflow: visible; }
.filter-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: .5rem; }
.filter-title { margin: 0; font-weight: 700; color: #d32f2f; }
.filter-status { font-size: .85rem; color: #757575; }
.filter-status.selected { color: #16a34a; }

/* Resumen inventarios */
.lotes-summary { display: grid; grid-template-columns: 1fr auto 1fr; gap: 1rem; align-items: center; margin-top: 1rem; }
.transfer-arrow { display: grid; place-items: center; color: #9e9e9e; }
.arrow-icon { font-size: 1.5rem; }
.lote-summary-card {
  border: 1px solid #e0e0e0; border-radius: 1rem; background: #fff; box-shadow: 0 2px 4px rgba(0,0,0,.06);
}
.lote-summary-card .card-header {
  display: flex; justify-content: space-between; align-items: center;
  padding: .6rem .9rem; border-bottom: 1px solid #eee; background: #fffde7;
}
.lote-summary-card .card-body { padding: .9rem; }
.inventory-info { display: grid; grid-template-columns: repeat(3, 1fr); gap: .5rem; }
.inventory-item { display: grid; justify-items: center; gap: .2rem; padding: .4rem .5rem; border-radius: .65rem; background: #fafafa; border: 1px solid #eee; }
.inventory-item.hembras .count { color: #16a34a; font-weight: 700; }
.inventory-item.machos .count  { color: #0ea5e9; font-weight: 700; }
.inventory-item.total  .count  { color: #b71c1c; font-weight: 800; }

/* Cantidades */
.step-subtitle { margin: .75rem 0 .4rem; font-weight: 700; color: #212121; }
.quantities-grid { display: grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: .9rem; }
@media (max-width: 960px) { .quantities-grid { grid-template-columns: 1fr; } }
.quantity-field .quantity-label { display: flex; align-items: center; gap: .4rem; font-weight: 600; color: #424242; margin-bottom: .35rem; }
.quantity-field .icon { font-weight: 700; }
.input-with-max { display: grid; grid-template-columns: 1fr auto auto; gap: .4rem; align-items: center; }
.max-indicator { font-size: .8rem; color: #616161; }
.btn--xs { padding: .25rem .5rem; font-size: .75rem; border-radius: .5rem; }

/* Resumen total */
.transfer-summary .summary-card { border: 1px solid #e0e0e0; background: #fff; border-radius: 1rem; overflow: hidden; }
.summary-header { padding: .5rem .8rem; background: #fffde7; border-bottom: 1px solid #eee; }
.summary-body { padding: .8rem; display: grid; gap: .5rem; }
.summary-item { display: flex; justify-content: space-between; gap: .75rem; }
.summary-item .value.total { font-weight: 800; color: #b71c1c; }
.summary-breakdown { display: flex; gap: .5rem; }
.breakdown-item { padding: .25rem .5rem; border-radius: .5rem; background: #fafafa; border: 1px solid #eee; }
.breakdown-item.hembras { color: #16a34a; }
.breakdown-item.machos { color: #0ea5e9; }

/* Alerts reutilizables */
.alert { display: grid; grid-template-columns: auto 1fr; align-items: start; gap: .5rem; padding: .6rem .8rem; border-radius: .75rem; border: 1px solid transparent; background: #fafafa; }
.alert--danger { background: #ffebee; border-color: #ffcdd2; color: #b71c1c; }
.alert--success { background: #f0fdf4; border-color: #dcfce7; color: #166534; }
.alert__icon { font-size: 1.1rem; line-height: 1; }
.alert__content { font-size: .95rem; }

/* Overlay de componentes flotantes del filtro */
.cdk-overlay-container, .cdk-overlay-pane { z-index: 1300 !important; }

/* ========== 18) Selector de Tipo de Traslado ========== */
.traslado-type-selector {
  display: flex;
  gap: var(--space-2);
  flex-wrap: wrap;
  
  .btn {
    min-width: 140px;
  }
}

/* ========== 19) Tabs de Hist√≥rico ========== */
.historial-tabs-section {
  margin-top: var(--space-6);
  padding-top: var(--space-6);
  border-top: 2px solid var(--gray-200);
}

.historial-tabs {
  display: flex;
  gap: var(--space-2);
  margin-bottom: var(--space-4);
  border-bottom: 2px solid var(--gray-200);
  padding-bottom: var(--space-2);
}

.historial-tab {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-3) var(--space-5);
  background: transparent;
  border: none;
  border-bottom: 3px solid transparent;
  cursor: pointer;
  font-weight: 600;
  color: var(--warm-600);
  transition: all 0.2s ease;
  position: relative;
  
  &:hover {
    color: var(--brand-red);
    background: var(--warm-50);
  }
  
  &.active {
    color: var(--brand-red);
    border-bottom-color: var(--brand-red);
    background: var(--amber-25);
  }
  
  .tab-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 24px;
    height: 24px;
    padding: 0 var(--space-2);
    background: var(--brand-red);
    color: var(--white);
    border-radius: 50%;
    font-size: 0.75rem;
    font-weight: 700;
  }
}

.historial-tab-panel {
  animation: fadeInTab 0.3s ease-out;
}

@keyframes fadeInTab {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ========== 20) Tabs de Registros (en tabla principal) ========== */
.registros-tabs-section {
  margin-top: var(--space-4);
}

.registros-tabs {
  display: flex;
  gap: var(--space-2);
  margin-bottom: var(--space-4);
  border-bottom: 2px solid var(--warm-200);
  padding-bottom: var(--space-2);
}

.registros-tab {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-3) var(--space-5);
  background: transparent;
  border: none;
  border-bottom: 3px solid transparent;
  cursor: pointer;
  font-weight: 600;
  color: var(--warm-600);
  transition: all 0.2s ease;
  position: relative;
  
  &:hover {
    color: var(--brand-red);
    background: var(--warm-50);
  }
  
  &.active {
    color: var(--brand-red);
    border-bottom-color: var(--brand-red);
    background: var(--amber-25);
  }
  
  .tab-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 24px;
    height: 24px;
    padding: 0 var(--space-2);
    background: var(--brand-red);
    color: var(--white);
    border-radius: 50%;
    font-size: 0.75rem;
    font-weight: 700;
  }
}

.registros-tab-panel {
  animation: fadeInTab 0.3s ease-out;
}
